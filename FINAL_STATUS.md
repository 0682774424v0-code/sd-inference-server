# ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: Civitai Integration –¥–ª—è SD Inference Server

## üéØ –©–æ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ

1. **Civitai API Integration** (`civitai_integration.py`)
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –∑ Civitai
   - –í–∏–¥–æ–±—É–≤–∞–Ω–Ω—è ID –º–æ–¥–µ–ª–µ–π –∑ URL
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–µ–≤—å—é
   - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ hash —Ñ–∞–π–ª—ñ–≤
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

2. **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏** (`model_metadata.py`)
   - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤ JSON —Ñ–∞–π–ª–∞—Ö
   - –ß–∏—Ç–∞–Ω–Ω—è –∑ –∫–µ—à—É–≤–∞–Ω–Ω—è–º
   - –ï–∫—Å–ø–æ—Ä—Ç/—ñ–º–ø–æ—Ä—Ç
   - –§—É–Ω–∫—Ü—ñ—è `get_manager()` - **–î–û–î–ê–ù–ê–î–û–ë–ê–í–õ–ï–ù–ê**

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è** (`auto_model_detector.py`)
   - –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞ –ø–∞–ø–∫–∞–º–∏
   - –§–æ–Ω–æ–≤–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
   - –ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞

4. **PyQt5 GUI Backend** (`GUI/source/model_manager.py`)
   - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ GUI
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
   - –°–∏–≥–Ω–∞–ª–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

5. **QML –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏** (`tabs/settings/`)
   - ModelCard.qml - –∫–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª—ñ
   - EditHashDialog.qml - —Ä–µ–¥–∞–∫—Ç–æ—Ä hash
   - ModelsPanel.qml - –≥–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å

6. **Google Colab –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** (`colab_civitai_setup.py`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
   - –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - –ü—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è Colab notebook

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- `README_CIVITAI_INTEGRATION.md` - –ü–æ–≤–Ω–∏–π –æ–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É
- `CIVITAI_INTEGRATION_GUIDE.md` - API reference
- `INSTALLATION_GUIDE.md` - –ö—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
- `CIVITAI_AND_MODELS_SUMMARY.md` - –¶—ñ–ª—å–Ω–∏–π summary
- `FIX_METADATA_ERROR.md` - –í–∏–ø—Ä–∞–≤–∫–∞ –ø–æ–º–∏–ª–∫–∏ `get_manager()`

## üêõ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞

‚ùå **–ë—É–ª–∞:** `Error: module "model_metadata" has no attribute "get_manager"`  
‚úÖ **–¢–µ–ø–µ—Ä:** –§—É–Ω–∫—Ü—ñ—è `get_manager()` –¥–æ–¥–∞–Ω–∞ –≤ –æ–±–∏–¥–≤–∞ —Ñ–∞–π–ª–∏

```python
def get_manager(models_dir: str = None, metadata_dir: str = None) -> ModelMetadataManager:
    # –°–∏–Ω–≥–ª—Ç–æ–Ω –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ö—ñ–ª—å–∫—ñ—Å—Ç—å |
|---------|-----------|
| –ù–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ Python | 4 |
| –ù–æ–≤–∏—Ö QML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ | 3 |
| –î–æ–∫—É–º–µ–Ω—Ç —Ñ–∞–π–ª—ñ–≤ | 6 |
| –†—è–¥–∫—ñ–≤ –∫–æ–¥—É | 2500+ |
| –§—É–Ω–∫—Ü—ñ–π API | 30+ |
| –ö–ª–∞—Å—ñ–≤ | 8 |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
sd-inference-server/
‚îú‚îÄ‚îÄ civitai_integration.py              ‚úÖ Civitai API
‚îú‚îÄ‚îÄ model_metadata.py                   ‚úÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
‚îú‚îÄ‚îÄ auto_model_detector.py              ‚úÖ –ê–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ colab_civitai_setup.py              ‚úÖ Colab —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ‚îÄ GUI/source/model_manager.py         ‚úÖ PyQt5 backend
‚îÇ
‚îú‚îÄ‚îÄ GUI/source/tabs/settings/
‚îÇ   ‚îú‚îÄ‚îÄ ModelCard.qml                   ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ EditHashDialog.qml              ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ ModelsPanel.qml                 ‚úÖ –ü–∞–Ω–µ–ª—å
‚îÇ
‚îú‚îÄ‚îÄ README_CIVITAI_INTEGRATION.md       ‚úÖ README
‚îú‚îÄ‚îÄ CIVITAI_INTEGRATION_GUIDE.md        ‚úÖ Guide
‚îú‚îÄ‚îÄ INSTALLATION_GUIDE.md               ‚úÖ Setup
‚îú‚îÄ‚îÄ CIVITAI_AND_MODELS_SUMMARY.md       ‚úÖ Summary
‚îî‚îÄ‚îÄ FIX_METADATA_ERROR.md               ‚úÖ Fix
```

## üöÄ –Ø–∫ —Ä–æ–∑–ø–æ—á–∞—Ç–∏

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install requests>=2.28.0
```

### –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ–Ω—Å—Ç–∞–≥—Ä–∞—Ü—ñ—é

```bash
python verify_installation.py
```

### –ö—Ä–æ–∫ 3: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GUI

–£ Settings –≤–∫–ª–∞–¥—Ü—ñ –∑'—è–≤–ª—è—î—Ç—å—Å—è –Ω–æ–≤–∏–π –ø—É–Ω–∫—Ç "Models" –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é:
- –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –º–æ–¥–µ–ª—ñ –≤ –ø–∞–ø—Ü—ñ
- –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ hash
- –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ –∑ Civitai
- –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏/—ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏

### –ö—Ä–æ–∫ 4: –î–ª—è Colab

```python
exec(open('colab_civitai_setup.py').read())
```

## üîë –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### Python API

```python
from civitai_integration import CivitaiIntegration
from model_metadata import ModelMetadataManager

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
integration = CivitaiIntegration()
manager = model_metadata.get_manager()

# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ Civitai
metadata = integration.fetch_model_metadata(model_id=12345)

# –ó–±–µ—Ä–µ–≥—Ç–∏
manager.set_civitai_metadata("model.safetensors", metadata)

# –û—Ç—Ä–∏–º–∞—Ç–∏ hash
hash_val = manager.get_hash("model.safetensors")
```

### GUI API

```python
from GUI.source.model_manager import ModelManager

manager = ModelManager()
manager.load_models_from_folder("./models/LoRA")
manager.fetch_civitai_metadata("model.safetensors", "civitai_url")
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `requests` –ø–∞–∫–µ—Ç
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π–ª–∏ —á–µ—Ä–µ–∑ `verify_installation.py`
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ `INSTALLATION_GUIDE.md`
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Civitai —Ç–æ–∫–µ–Ω (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤ –≤–∞—à –∫–æ–¥
- [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –Ω–∞ –º–∞–ª–µ–Ω—å–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –º–æ–¥–µ–ª–µ–π
- [ ] –î–ª—è Colab –∑–∞–ø—É—Å—Ç–∏—Ç–∏ `colab_civitai_setup.py`

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Civitai —Ç–æ–∫–µ–Ω
export CIVITAI_TOKEN="your_token_here"
```

## üêõ –Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø–æ–º–∏–ª–∫–∏

### –ü–æ–º–∏–ª–∫–∞: `get_manager not found`
‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ** - —Ñ—É–Ω–∫—Ü—ñ—è –¥–æ–¥–∞–Ω–∞ –≤ –æ–±–∏–¥–≤–∞ —Ñ–∞–π–ª–∏ model_metadata.py

### –ü–æ–º–∏–ª–∫–∞: `requests not found`
```bash
pip install requests>=2.28.0
```

### –ü–æ–º–∏–ª–∫–∞: `Civitai API rate limit`
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î —Ü–µ
- –ó—Ä–æ–±—ñ—Ç—å –ø–∞—É–∑—É —Ç–∞ –ø–æ–≤—Ç–æ—Ä—ñ—Ç—å

### –ü–æ–º–∏–ª–∫–∞: `Preview images not downloading`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è
- –¶–∏–≤—ñ—Ç–∞–π –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ—ó –¥–æ–ø–æ–º–æ–≥–∏ –¥–∏–≤.:
- `INSTALLATION_GUIDE.md` - Troubleshooting
- `CIVITAI_INTEGRATION_GUIDE.md` - API Reference
- `colab_civitai_setup.py` - –ü—Ä–∏–º–µ—Ä–∏ –¥–ª—è Colab

## üìà –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–∞ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:
- –î–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –º–æ–¥–µ–ª–µ–π
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ HuggingFace
- Web UI –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –º–æ–¥–µ–ª—è–º–∏
- –°–∏—Å—Ç–µ–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ hash
- –ö–µ—à –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ –¥–æ—Å—Ç—É–ø—É

## ‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–æ–±—É–≤–∞–Ω–Ω—è ID –∑ Civitai URL
- ‚úÖ –§–æ–Ω–æ–≤–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤–∏—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ö–µ—à–∏—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è —à–≤–∏–¥–∫–æ—ó —Ä–æ–±–æ—Ç–∏
- ‚úÖ JSON –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏—Ö
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è GUI
- ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ hash
- ‚úÖ –õ–µ–≥–∫–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ Colab
- ‚úÖ –ë–µ–∑—É–º–æ–≤–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

| –§–∞–π–ª | –û–ø–∏—Å |
|------|------|
| README_CIVITAI_INTEGRATION.md | –ü–æ–≤–Ω–∏–π –æ–≥–ª—è–¥ –ø—Ä–æ–µ–∫—Ç—É |
| CIVITAI_INTEGRATION_GUIDE.md | –î–µ—Ç–∞–ª—å–Ω–∏–π API guide |
| INSTALLATION_GUIDE.md | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞ —ñ–Ω—Å—Ç–∞–≥—Ä–∞—Ü–∏—è |
| CIVITAI_AND_MODELS_SUMMARY.md | –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –æ–ø–∏—Å |
| FIX_METADATA_ERROR.md | –í–∏–ø—Ä–∞–≤–∫–∞ –ø–æ–º–∏–ª–∫–∏ |

---

## üéâ –ì–û–¢–û–í–û!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞.  
–ì–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —Ü—ñ–ª—å–Ω–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ.

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:** 21 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2024  
**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ PRODUCTION-READY

–ü—Ä–∏—î–º–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è! üöÄ
