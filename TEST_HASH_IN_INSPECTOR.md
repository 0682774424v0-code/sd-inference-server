# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Hash –≤ Inspector

## –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é

### 1Ô∏è‚É£ **–§–∞–∫—Ç–∏—á–Ω–æ, –≤—Å–µ –≤–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

–ö–æ–ª–∏ –≤–∏ —Å–∫–∞—á–∞—î—Ç–µ –º–æ–¥–µ–ª—å –∑ Civitai —á–µ—Ä–µ–∑ GUI:

1. ‚úÖ –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –≤ `models/LoRA/` –∞–±–æ `models/SD/`
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è `.metadata.json` –∑ —Ö–µ—à–µ–º
3. ‚úÖ –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–∞–≤–æ—é –∫–Ω–æ–ø–∫–æ—é ‚Üí **"Inspect"**
4. ‚úÖ –£ –¥—ñ–∞–ª–æ–∑—ñ –±—É–¥–µ –≤–∏–¥–Ω–æ:
   - `hash`: "abc123def456..."
   - `hash_type`: "AUTOV2"

### 2Ô∏è‚É£ **–†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

–Ø–∫—â–æ —É –≤–∞—Å –≤–∂–µ —î –º–æ–¥–µ–ª—ñ –≤ –ø—Ä–æ–µ–∫—Ç—ñ:

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –ø—Ä–æ–µ–∫—Ç—É
cd /path/to/sd-inference-server

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ GUI
python GUI/source/main.py
```

**–í GUI:**
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Explorer** tab
2. –í–∏–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫—É LoRA –∞–±–æ Checkpoint –º–æ–¥–µ–ª—å
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"Inspect"** (–∞–±–æ –ø—Ä–∞–≤–æ—é –∫–Ω–æ–ø–∫–æ—é ‚Üí Inspect)
4. –£ –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤—ñ–∫–Ω—ñ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –≤–Ω–∏–∑ - –±—É–¥–µ –≤–∏–¥–Ω–æ **hash**

### 3Ô∏è‚É£ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö**

–ú–æ–≤–∞ Python:
```python
import model_metadata
import os

# –û—Ç—Ä–∏–º–∞—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä
manager = model_metadata.get_manager()

# –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ –º–æ–¥–µ–ª—ñ
model_path = "/path/to/models/LoRA/my_lora.safetensors"
metadata = manager.load_metadata(model_path)

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ hash
if metadata:
    print(f"Hash: {metadata.get('hash', 'N/A')}")
    print(f"Type: {metadata.get('hash_type', 'N/A')}")
else:
    print("–ú–µ—Ç–∞–¥–∞–Ω—ñ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ")
```

### 4Ô∏è‚É£ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ storage.py –Ω–∞–ø—Ä—è–º–∫–∏**

–ú–æ–≤–∞ Python:
```python
import storage
import torch

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ storage
s = storage.Storage("/path/to/models", torch.float16)

# –û—Ç—Ä–∏–º–∞—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ –∑ Inspector
metadata = s.get_metadata("my_lora_name")

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ hash
if "hash" in metadata:
    print("‚úÖ Hash –≤–∏—è–≤–ª–µ–Ω–æ –≤ Inspector!")
    print(f"Hash: {metadata['hash']}")
    print(f"Hash Type: {metadata.get('hash_type', 'Unknown')}")
else:
    print("‚ùå Hash –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ")
```

## üîç –©–æ —à—É–∫–∞—Ç–∏

### ‚úÖ –£—Å–ø—ñ—Ö
```
Inspector –¥–ª—è "my_lora.safetensors"
‚îú‚îÄ‚îÄ hash: "f3a8c2d7e1b4a9f6c3e8b1d4a7f2c5e8b1d4a7f2"
‚îú‚îÄ‚îÄ hash_type: "AUTOV2"
‚îú‚îÄ‚îÄ civitai_model_id: "123456"
‚îî‚îÄ‚îÄ ... —ñ–Ω—à—ñ –¥–∞–Ω—ñ
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∏

**–Ø–∫—â–æ hash –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —ñ—Å–Ω—É—î —Ñ–∞–π–ª `model.safetensors.metadata.json`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –º–∞—î –ø—Ä–∞–≤–∞ –Ω–∞ —á–∏—Ç–∞–Ω–Ω—è
3. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ GUI
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏

**–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞:**
```
Error while loading metadata: ...
```
‚Üí –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–≤–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```
sd-inference-server/
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ LoRA/
‚îÇ       ‚îú‚îÄ‚îÄ my_lora.safetensors              ‚Üê –ú–æ–¥–µ–ª—å
‚îÇ       ‚îî‚îÄ‚îÄ my_lora.safetensors.metadata.json ‚Üê –ú–µ—Ç–∞–¥–∞–Ω—ñ –∑ hash
‚îú‚îÄ‚îÄ storage.py                               ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ
‚îú‚îÄ‚îÄ model_metadata.py                        ‚úÖ –Ü—Å–Ω—É—î
‚îî‚îÄ‚îÄ wrapper.py                               ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–æ
```

## üéØ –°—Ü–µ–Ω–∞—Ä—ñ–π –ø–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```
1. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ LoRA –º–æ–¥–µ–ª—å –∑ Civitai —á–µ—Ä–µ–∑ GUI
   ‚Üì
2. –ú–æ–¥–µ–ª—å –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ Explorer
   ‚Üì
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "Inspect" –Ω–∞ –º–æ–¥–µ–ª—ñ
   ‚Üì
4. –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è Inspector –¥—ñ–∞–ª–æ–≥
   ‚Üì
5. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –¥–æÂ∫ïÈÉ® –≤–Ω–∏–∑
   ‚Üì
6. ‚úÖ –ü–æ–±–∞—á–∏—Ç–∏ hash: "..."
   ‚Üì
7. –£—Å–ø—ñ—Ö! üéâ
```

## üìù –ñ—É—Ä–Ω–∞–ª —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç #1: –ë–∞–∑–æ–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –º–æ–¥–µ–ª—å –∑ Civitai
- [ ] –ú–æ–¥–µ–ª—å –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –ø–∞–ø—Ü—ñ models
- [ ] –ú–µ—Ç–∞–¥–∞–Ω–Ω—ñ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –¢–µ—Å—Ç #2: Inspector –¥—ñ–∞–ª–æ–≥
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ Inspect –Ω–∞ –º–æ–¥–µ–ª—ñ
- [ ] –î—ñ–∞–ª–æ–≥ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
- [ ] Hash –≤–∏–¥–Ω–æ –≤ –¥—ñ–∞–ª–æ–∑—ñ

### –¢–µ—Å—Ç #3: –†—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –º–æ–¥–µ–ª–µ–π
- [ ] LoRA –º–æ–¥–µ–ª—å ‚Üí hash –≤–∏–¥–Ω–æ ‚úÖ
- [ ] Checkpoint –º–æ–¥–µ–ª—å ‚Üí hash –≤–∏–¥–Ω–æ ‚úÖ
- [ ] Embedding –º–æ–¥–µ–ª—å ‚Üí hash –≤–∏–¥–Ω–æ ‚úÖ

### –¢–µ—Å—Ç #4: –†—ñ–∑–Ω—ñ —Ç–∏–ø–∏ —Ö–µ—à—ñ–≤
- [ ] AUTOV2 hash ‚Üí –≤–∏–¥–Ω–æ ‚úÖ
- [ ] SHA256 hash ‚Üí –≤–∏–¥–Ω–æ ‚úÖ
- [ ] –Ü–Ω—à—ñ —Ç–∏–ø–∏ ‚Üí –≤–∏–¥–Ω–æ ‚úÖ

## üöÄ –ü–æ–º–∏–ª–∫–∏, —è–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î

### –ü–æ–º–∏–ª–∫–∞: "AttributeError: module 'model_metadata' has no attribute..."
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ GUI –∞–±–æ Python —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä

### –ü–æ–º–∏–ª–∫–∞: "FileNotFoundError: .metadata.json –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
**–†—ñ—à–µ–Ω–Ω—è:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –º–æ–¥–µ–ª—å –º–æ–∂–µ –Ω–µ –º–∞—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö. –§—É–Ω–∫—Ü—ñ—è –º–∞—î fallback.

### –ü–æ–º–∏–ª–∫–∞: Hash –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –≤ Inspector
**–†—ñ—à–µ–Ω–Ω—è:** 
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —ñ—Å–Ω—É—î —Ñ–∞–π–ª `.metadata.json`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–æ–º–∏–ª–æ–∫
3. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ GUI

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ hash –≤ Inspector –¥—ñ–∞–ª–æ–∑—ñ - **—Ñ—É–Ω–∫—Ü—ñ—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üéâ

---

**–í–µ—Ä—Å—ñ—è:** 1.0.4  
**–î–∞—Ç–∞:** 21 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2024  
**–°—Ç–∞—Ç—É—Å:** Ready for Testing ‚úÖ

